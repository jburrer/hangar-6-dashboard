{"ast":null,"code":"import { readFileSync, renameSync, writeFileSync } from 'node:fs';\nimport { readFile } from 'node:fs/promises';\nimport path from 'node:path';\nimport { Writer } from 'steno';\nexport class TextFile {\n  #filename;\n  #writer;\n  constructor(filename) {\n    this.#filename = filename;\n    this.#writer = new Writer(filename);\n  }\n  async read() {\n    let data;\n    try {\n      data = await readFile(this.#filename, 'utf-8');\n    } catch (e) {\n      if (e.code === 'ENOENT') {\n        return null;\n      }\n      throw e;\n    }\n    return data;\n  }\n  write(str) {\n    return this.#writer.write(str);\n  }\n}\nexport class TextFileSync {\n  #tempFilename;\n  #filename;\n  constructor(filename) {\n    this.#filename = filename;\n    const f = filename.toString();\n    this.#tempFilename = path.join(path.dirname(f), `.${path.basename(f)}.tmp`);\n  }\n  read() {\n    let data;\n    try {\n      data = readFileSync(this.#filename, 'utf-8');\n    } catch (e) {\n      if (e.code === 'ENOENT') {\n        return null;\n      }\n      throw e;\n    }\n    return data;\n  }\n  write(str) {\n    writeFileSync(this.#tempFilename, str);\n    renameSync(this.#tempFilename, this.#filename);\n  }\n}","map":{"version":3,"names":["readFileSync","renameSync","writeFileSync","readFile","path","Writer","TextFile","filename","writer","constructor","read","data","e","code","write","str","TextFileSync","tempFilename","f","toString","join","dirname","basename"],"sources":["/home/n3mo/Documents/hangar-6-dashboard/node_modules/lowdb/lib/adapters/node/TextFile.js"],"sourcesContent":["import { readFileSync, renameSync, writeFileSync } from 'node:fs';\nimport { readFile } from 'node:fs/promises';\nimport path from 'node:path';\nimport { Writer } from 'steno';\nexport class TextFile {\n    #filename;\n    #writer;\n    constructor(filename) {\n        this.#filename = filename;\n        this.#writer = new Writer(filename);\n    }\n    async read() {\n        let data;\n        try {\n            data = await readFile(this.#filename, 'utf-8');\n        }\n        catch (e) {\n            if (e.code === 'ENOENT') {\n                return null;\n            }\n            throw e;\n        }\n        return data;\n    }\n    write(str) {\n        return this.#writer.write(str);\n    }\n}\nexport class TextFileSync {\n    #tempFilename;\n    #filename;\n    constructor(filename) {\n        this.#filename = filename;\n        const f = filename.toString();\n        this.#tempFilename = path.join(path.dirname(f), `.${path.basename(f)}.tmp`);\n    }\n    read() {\n        let data;\n        try {\n            data = readFileSync(this.#filename, 'utf-8');\n        }\n        catch (e) {\n            if (e.code === 'ENOENT') {\n                return null;\n            }\n            throw e;\n        }\n        return data;\n    }\n    write(str) {\n        writeFileSync(this.#tempFilename, str);\n        renameSync(this.#tempFilename, this.#filename);\n    }\n}\n"],"mappings":"AAAA,SAASA,YAAY,EAAEC,UAAU,EAAEC,aAAa,QAAQ,SAAS;AACjE,SAASC,QAAQ,QAAQ,kBAAkB;AAC3C,OAAOC,IAAI,MAAM,WAAW;AAC5B,SAASC,MAAM,QAAQ,OAAO;AAC9B,OAAO,MAAMC,QAAQ,CAAC;EAClB,CAACC,QAAQ;EACT,CAACC,MAAM;EACPC,WAAWA,CAACF,QAAQ,EAAE;IAClB,IAAI,CAAC,CAACA,QAAQ,GAAGA,QAAQ;IACzB,IAAI,CAAC,CAACC,MAAM,GAAG,IAAIH,MAAM,CAACE,QAAQ,CAAC;EACvC;EACA,MAAMG,IAAIA,CAAA,EAAG;IACT,IAAIC,IAAI;IACR,IAAI;MACAA,IAAI,GAAG,MAAMR,QAAQ,CAAC,IAAI,CAAC,CAACI,QAAQ,EAAE,OAAO,CAAC;IAClD,CAAC,CACD,OAAOK,CAAC,EAAE;MACN,IAAIA,CAAC,CAACC,IAAI,KAAK,QAAQ,EAAE;QACrB,OAAO,IAAI;MACf;MACA,MAAMD,CAAC;IACX;IACA,OAAOD,IAAI;EACf;EACAG,KAAKA,CAACC,GAAG,EAAE;IACP,OAAO,IAAI,CAAC,CAACP,MAAM,CAACM,KAAK,CAACC,GAAG,CAAC;EAClC;AACJ;AACA,OAAO,MAAMC,YAAY,CAAC;EACtB,CAACC,YAAY;EACb,CAACV,QAAQ;EACTE,WAAWA,CAACF,QAAQ,EAAE;IAClB,IAAI,CAAC,CAACA,QAAQ,GAAGA,QAAQ;IACzB,MAAMW,CAAC,GAAGX,QAAQ,CAACY,QAAQ,CAAC,CAAC;IAC7B,IAAI,CAAC,CAACF,YAAY,GAAGb,IAAI,CAACgB,IAAI,CAAChB,IAAI,CAACiB,OAAO,CAACH,CAAC,CAAC,EAAE,IAAId,IAAI,CAACkB,QAAQ,CAACJ,CAAC,CAAC,MAAM,CAAC;EAC/E;EACAR,IAAIA,CAAA,EAAG;IACH,IAAIC,IAAI;IACR,IAAI;MACAA,IAAI,GAAGX,YAAY,CAAC,IAAI,CAAC,CAACO,QAAQ,EAAE,OAAO,CAAC;IAChD,CAAC,CACD,OAAOK,CAAC,EAAE;MACN,IAAIA,CAAC,CAACC,IAAI,KAAK,QAAQ,EAAE;QACrB,OAAO,IAAI;MACf;MACA,MAAMD,CAAC;IACX;IACA,OAAOD,IAAI;EACf;EACAG,KAAKA,CAACC,GAAG,EAAE;IACPb,aAAa,CAAC,IAAI,CAAC,CAACe,YAAY,EAAEF,GAAG,CAAC;IACtCd,UAAU,CAAC,IAAI,CAAC,CAACgB,YAAY,EAAE,IAAI,CAAC,CAACV,QAAQ,CAAC;EAClD;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}